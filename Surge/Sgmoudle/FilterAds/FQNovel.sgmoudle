#!name=番茄去广告
#!author=ByteValley & ChatGPT
#!desc=全面拦截番茄小说广告（开屏/贴片/视频/章中/章末/浮窗），保留核心业务。
#!icon=https://gitlab.com/lodepuly/iconlibrary/-/raw/main/App_icon/120px/DragonRead.png
#!category=广告屏蔽  

[Rule]
# —— 1. 抖音跳转白名单 ——  
DOMAIN,www.douyin.com,DIRECT
DOMAIN,aweme.snssdk.com,DIRECT

# —— 2. 精准拦“misc-lf”卡片广告 ——  
#    mon11-misc-lf.fqnovel.com 等
AND,((DOMAIN-SUFFIX,fqnovel.com),(DOMAIN-KEYWORD,misc-lf)),REJECT

# —— 3. 精准拦“applog-lf”埋点广告 ——  
#    log0-applog-lf.fqnovel.com
AND,((DOMAIN-SUFFIX,fqnovel.com),(DOMAIN-KEYWORD,applog-lf)),REJECT

# —— 4. 精准拦“normal-lf”广告接口 ——  
AND,((DOMAIN-SUFFIX,fqnovel.com),(DOMAIN-KEYWORD,normal-lf)),REJECT

# —— 5. 核心业务白名单 ——  
AND,((DOMAIN-SUFFIX,fqnovel.com),(DOMAIN-KEYWORD,normal)),DIRECT

# —— 6. 视频流 & SDK 容器 ——  
DOMAIN-KEYWORD,novelvod,REJECT
DOMAIN-KEYWORD,pangolin-sdk-toutiao,REJECT

# —— 7. 奖励视频 & 流媒体广告 ——  
DOMAIN-SUFFIX,bytedcdn.com,REJECT

# —— 8. 图片广告 & 样式包 ——  
#    拦截阅读广告子域 p9-reading-sign、lf3-reading 等
AND,((DOMAIN-SUFFIX,fqnovelpic.com),(AND,((DOMAIN-KEYWORD,lf),(DOMAIN-KEYWORD,reading)))),REJECT
AND,((DOMAIN-SUFFIX,fqnovelpic.com),(DOMAIN-KEYWORD,misc-lf)),REJECT
AND,((DOMAIN-SUFFIX,fqnovelpic.com),(DOMAIN-KEYWORD,ad-sign)),REJECT
AND,((DOMAIN-SUFFIX,byteimg.com),(DOMAIN-KEYWORD,ad-sign)),REJECT
DOMAIN-SUFFIX,lf-cdn-tos.bytescm.com,REJECT
DOMAIN-SUFFIX,tnc3-alisc1.zijieapi.com,REJECT

# —— 9. 抖音 LF 广告接口 ——  
AND,((DOMAIN-SUFFIX,douyin.com),(DOMAIN-KEYWORD,open-lf)),REJECT

# —— 10. ByteGecko 广告素材 CDN ——  
AND,((DOMAIN-SUFFIX,bytegecko.com),(DOMAIN-KEYWORD,sourcecdn)),REJECT

# —— 11. 通用跟踪 / 短链 ——  
DOMAIN-SUFFIX,bdurl.net,REJECT
DOMAIN-SUFFIX,zjurl.cn,REJECT

# —— 12. 其他广告专属接口 ——  
AND,((DOMAIN-SUFFIX,ecombdapi.com),(DOMAIN-KEYWORD,-lf)),REJECT
AND,((DOMAIN-SUFFIX,zijieapi.com),(DOMAIN-KEYWORD,minigame)),REJECT
AND,((DOMAIN-SUFFIX,zijieapi.com),(DOMAIN-KEYWORD,misc-lf)),REJECT
AND,((DOMAIN-SUFFIX,zijieapi.com),(DOMAIN-KEYWORD,-lf)),REJECT

# —— 13. IP 兜底 ——  
IP-CIDR,47.246.38.0/24,REJECT,no-resolve
IP-CIDR,101.36.166.16/32,REJECT,no-resolve
