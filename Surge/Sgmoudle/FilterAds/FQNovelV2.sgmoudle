#!name=番茄去广告
#!author=ByteValley & ChatGPT
#!desc=移除番茄小说开屏／贴片/视频等广告，保留核心业务。
#!icon=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/DragonRead.png
#!category=广告屏蔽

[Rule]
# —— 视频内容 ——
DOMAIN-SUFFIX,fqnovelvod.com,REJECT # 直接丢弃视频流

# —— 图片广告 ——
AND,((DOMAIN-SUFFIX,fqnovel.com),(DOMAIN-KEYWORD,misc-lf)),REJECT
# —— 精准拦所有 misc-lf.fqnovel.com 子域 ——
DOMAIN-REGEX,^[^.]+-misc-lf\.fqnovel\.com$,REJECT
AND,((DOMAIN-SUFFIX,fqnovel.com),(DOMAIN-KEYWORD,toutiao)),REJECT
DOMAIN-SUFFIX,fqnovelpic.com,REJECT # 图像广告常见域
AND,((DOMAIN-SUFFIX,byteimg.com),(DOMAIN-KEYWORD,ad-sign)),REJECT

# —— 通用广告拦截 ——
AND,((DOMAIN-SUFFIX,ecombdapi.com),(DOMAIN-KEYWORD,-lf)),REJECT
AND,((DOMAIN-SUFFIX,zijieapi.com),(DOMAIN-KEYWORD,minigame)),REJECT
AND,((DOMAIN-SUFFIX,zijieapi.com),(DOMAIN-KEYWORD,-lf)),REJECT

# —— 拉广告配置的 SDK 接口 ——
URL-REGEX,^https?://[^/]+\.pangolin-sdk-toutiao\.com/api/ad/union/sdk/get_ads,REJECT

# —— 其他图片／样式／脚本广告 ——
DOMAIN-SUFFIX,fqnovelpic.com,REJECT # 图像广告
DOMAIN-SUFFIX,byteimg.com,REJECT # 通用广告图
DOMAIN-SUFFIX,pangolin-sdk-toutiao.com,REJECT
DOMAIN-SUFFIX,pglstatp-toutiao.com,REJECT
DOMAIN-SUFFIX,lf-cdn-tos.bytescm.com,REJECT
DOMAIN-SUFFIX,tnc3-alisc1.zijieapi.com,REJECT
DOMAIN-SUFFIX,bytegoofy.com,REJECT
DOMAIN-SUFFIX,bytegecko.com,REJECT

# —— 通用链路跟踪/短链 ——
DOMAIN-SUFFIX,bdurl.net,REJECT
DOMAIN-SUFFIX,zjurl.cn,REJECT

[MITM]
hostname = pangolin-sdk-toutiao.com
