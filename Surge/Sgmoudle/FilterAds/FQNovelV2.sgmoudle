#!name=番茄去广告
#!author=ByteValley & ChatGPT
#!desc=移除番茄小说开屏／贴片／听书／图像／视频广告，保留封面、头像及核心功能（预约／签到／催更／书城／短剧）。
#!icon=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/DragonRead.png
#!category=广告屏蔽

[Rule]
# ——— 放行业务接口：预约／签到／催更/封面/头像 ———
URL-REGEX,^https://api-access\.pangolin-sdk-toutiao(?:\d|-b)?\.com/api/book/(reserve_info|reserve),DIRECT # 预约查询 & 执行
URL-REGEX,^https://api-access\.pangolin-sdk-toutiao(?:\d|-b)?\.com/api/book/(sign_info|get_sign_info),DIRECT # 查询签到状态
URL-REGEX,^https://api-access\.pangolin-sdk-toutiao(?:\d|-b)?\.com/api/book/sign$,DIRECT # 执行签到
URL-REGEX,^https://api-access\.pangolin-sdk-toutiao(?:\d|-b)?\.com/api/(?:book|novel|article)/urge, DIRECT # 催更接口

# ——— 激励／联盟广告 SDK ———
URL-REGEX,^https?://(api-access\.pangolin-sdk-toutiao(?:\d|-b)?|is\.snssdk)\.com/api/ad/union/sdk/get_ads,DIRECT # 放行去广告脚本调用
URL-REGEX,^https?://.+\.pangolin-sdk-toutiao.*?/api/ad/union/sdk/(get_ads|stats|settings)/,REJECT # 拦截广告脚本资源包

# ——— 视频广告 ———
AND, ((DOMAIN-KEYWORD, reading-video), (DOMAIN-SUFFIX, fqnovelvod.com)), REJECT # 拦截视频类广告域
URL-REGEX,^https?://v\d+-novelapp\.fqnovelvod\.com/.+/video/.+,REJECT # 拦截视频广告路径

# ——— 图片广告 ———
AND, ((OR, ((DOMAIN-KEYWORD, misc-lf), (DOMAIN-KEYWORD, api), (DOMAIN-KEYWORD, toutiao))), (DOMAIN-SUFFIX, fqnovel.com)), REJECT # 拦截 fqnovel 广告图
AND, ((OR, ((DOMAIN-KEYWORD, -ad-), (DOMAIN-KEYWORD, -novel), (DOMAIN-KEYWORD, ad-sign))), (DOMAIN-SUFFIX, byteimg.com)), REJECT # 拦截 byteimg 广告图
# AND, ((DOMAIN-KEYWORD, reading-sign), (DOMAIN-SUFFIX, fqnovelpic.com)), REJECT # 拦截番茄小说图像广告

# ——— 其它已知广告子域／伪装资源 ———
URL-REGEX,^http://sf3-be-pack\.pglstatp-toutiao\.com/obj/ad-app-package/,REJECT # 拦截下载包广告
AND, ((DOMAIN-KEYWORD, cdn-tos), (DOMAIN-SUFFIX, bytegoofy.com)), REJECT
AND, ((DOMAIN-KEYWORD, webcast-gr-sourcecdn), (DOMAIN-SUFFIX, bytegecko.com)), REJECT

# ——— 通用广告拦截 ———
AND, ((DOMAIN-KEYWORD, -lf), (DOMAIN-SUFFIX, ecombdapi.com)), REJECT # 拦截所有 -lf.ecombdapi.com
AND, ((OR, ((DOMAIN-KEYWORD, minigame), (DOMAIN-KEYWORD, -lf))), (DOMAIN-SUFFIX, zijieapi.com)), REJECT # 拦截zijieapi
AND, ((DOMAIN-KEYWORD, dig), (OR, ((DOMAIN-SUFFIX, bdurl.net), (DOMAIN-SUFFIX, zjurl.cn)))), REJECT # dig.* 短链跟踪
