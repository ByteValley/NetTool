#!name=今日黄历
#!desc=面板顶部可选展示「今日黄历详情」（干支纪法+宜忌），下方四行节日倒数：法定节假日 | 二十四节气 | 传统民俗 | 国际洋节；支持外链标题/祝词库；法定与民俗正日06:00后单次祝词提醒；脚本无参数调用时自动通过系统通知播报今日黄历详情。
#!category=功能看板
#!author=ByteValley
#!version=2025-11-18R2

#!arguments=Update:3600,TITLES_URL:'',BLESS_URL:'',SHOW_ALMANAC:true,GAP_LINES:1,TITLE_MODE:'day',cronexp:'0 9 * * *'

#!arguments-desc=— 参数说明 —\n• Update=面板刷新间隔(秒)\n• TITLES_URL 标题库外链(JSON数组, 支持 {lunar} {solar} {next})\n• BLESS_URL 祝词库外链(JSON对象, 键=节日名, 值=祝词)\n• SHOW_ALMANAC 是否在顶部附加今日黄历详情(true/false)\n• GAP_LINES 节日行与行之间的空行数(0=无空行,1=一行,2=两行…)\n• TITLE_MODE 标题模式(day=当天固定,random=每次随机)\n• cronexp 定时播报 Cron 表达式\n    格式: 秒 分 时 日 月 周\n    示例: \"0 9 * * *\" = 每天 09:00 播报\n    字段: [秒 0–59] [分 0–59] [时 0–23] [日 1–31] [月 1–12] [周 0–6, 周日=0]\n\n— 外链 JSON 示例 —\n• TITLES_URL: [\"摸鱼使我快乐～\",\"{lunar}\",\"{solar}\",\"下一站：{next}\"]\n• BLESS_URL: {\"春节\":\"愿新岁顺遂无虞，家人皆安！\",\"中秋节\":\"人月两团圆，心上皆明朗。\",\"腊八节\":\"粥香暖岁末。\"}\n\n— 传参示例(argument) —\n• TITLES_URL=https://example.com/titles.json&BLESS_URL=https%3A%2F%2Fexample.com%2Fbless.json&SHOW_ALMANAC=true&GAP_LINES=1&TITLE_MODE=day

[Panel]
# 模块分类：功能看板  |  细项：四行节日/节气倒数 + 可选今日黄历详情
今日黄历 = script-name=今日黄历·面板, update-interval={{{Update}}}

[Script]
# 模块分类：功能看板  |  细项：面板展示（传入参数时启用）
# 功能说明：可选「今日黄历详情」（干支纪法/宜忌） + 法定节假日 | 二十四节气 | 传统民俗 | 国际洋节 四行倒数
今日黄历·面板 = type=generic, timeout=60, script-path=https://raw.githubusercontent.com/ByteValley/NetTool/main/Scripts/Panel/today_almanac.js, argument=TITLES_URL={{{TITLES_URL}}}&BLESS_URL={{{BLESS_URL}}}&SHOW_ALMANAC={{{SHOW_ALMANAC}}}&GAP_LINES={{{GAP_LINES}}}&TITLE_MODE={{{TITLE_MODE}}}

# 模块分类：功能看板  |  细项：定时播报（无参数时自动进入播报模式）
# 功能说明：
#   · 每日固定时间通过系统通知播报「今日黄历详情」（干支纪法+宜忌），不依赖面板；
#   · 同一脚本：有参数时走面板模式，无参数时走播报模式（已在 JS 内自动兼容，无需配置 argument）。
今日黄历·播报 = type=cron, cronexp={{{cronexp}}}, timeout=20, script-path=https://raw.githubusercontent.com/ByteValley/NetTool/main/Scripts/Panel/today_almanac.js
# 使用提示：
#   · 如启用上方 Cron，请确保已在 Surge / Egern 中开启脚本通知权限；
#   · cronexp 可按需调整，例如 "0 7 * * *"（每天 07:00 播报）或 "0 9 * * *"（每天 09:00 播报）。